webpackJsonp([1],{"/UJQ":function(t,e){},"07qm":function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};i.d(n,"getPokemonTypeList",function(){return A}),i.d(n,"getPokemonList",function(){return T}),i.d(n,"getPokemonItem",function(){return C}),i.d(n,"getPokemonListByType",function(){return q});i("tvR6");var a=i("qBF2"),r=i.n(a),s=i("7+uW"),o=i("mtWM"),l=i.n(o),c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"container app-container"},[e("div",{staticClass:"main"},[e("div",{staticClass:"main-wrapper"},[e("router-view")],1)])])])},staticRenderFns:[]};var u=i("VU/8")({name:"App",data:function(){return{}},components:{},mounted:function(){},methods:{}},c,!1,function(t){i("/UJQ")},null,null).exports,p=i("/ocq"),d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"filter-container"},[i("div",[t._v("Types:")]),t._v(" "),i("div",t._l(t.list,function(e,n){return i("el-button",{key:n,attrs:{type:e.selected?"primary":""},on:{click:function(i){return t.handlefilterlist(n,e.url)}}},[t._v(t._s(e.name)+"\n    ")])}),1)])},staticRenderFns:[]};var f={name:"pkList",data:function(){return{page_size:48,page_index:0,page_total:0,page_list:[],count:0}},mounted:function(){},watch:{total_list:{handler:function(t,e){t=t||[],this.count=t.length,this.page_index=0,this.page_total=Math.ceil(this.count/this.page_size)||1,this.refreshList()}}},methods:{refreshList:async function(){var t=this;this.page_list=[];for(var e=function(e){e>=t.page_index*t.page_size&&e<t.page_size*(t.page_index+1)&&(t.page_list.push({name:t.total_list[e].name,imgUrl:""}),t.$parent.fetchListItems(t.total_list[e].name,t.total_list[e].url).then(function(i){i.name;var n=i.sprites;t.page_list.filter(function(i){return i.name==t.total_list[e].name})[0].imgUrl=n.other["official-artwork"].front_default}))},i=0;i<this.total_list.length;i++)e(i)},toPrev:function(){0!=this.page_index&&(this.page_index--,this.refreshList())},toNext:function(){this.page_index!=this.page_total-1&&(this.page_index++,this.refreshList())}},props:["total_list"]},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"count-bar"},[t._v(t._s(t.count)+" results found.")]),t._v(" "),i("el-row",{attrs:{gutter:10}},t._l(t.page_list,function(e,n){return i("el-col",{attrs:{xs:8,sm:6,md:4,lg:3,xl:1}},[i("div",{staticClass:"img"},[i("img",{directives:[{name:"show",rawName:"v-show",value:e.imgUrl,expression:"item.imgUrl"}],attrs:{src:e.imgUrl,alt:""}})]),t._v(" "),i("div",[t._v(t._s(e.name))])])}),1),t._v(" "),i("div",{staticClass:"btn-wrapper"},[i("el-button",{attrs:{type:"primary",disabled:0==t.page_index},on:{click:t.toPrev}},[t._v("Prev")]),t._v(" "),i("el-button",{attrs:{type:"primary",disabled:t.page_index==t.page_total-1},on:{click:t.toNext}},[t._v("Next")])],1)],1)},staticRenderFns:[]};function _(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var m={name:"pokemonlist",data:function(){return{limit:1200,pagesize:10,currentPage:1,count:0,filter_list_data:[],list_data:[],list_count:0,cache_item_data:{},cache_list_data:{}}},components:{pkFilter:i("VU/8")({name:"pkFilter",data:function(){return{}},mounted:function(){},methods:{handlefilterlist:function(t,e){this.list[t].selected=!this.list[t].selected,this.filterItems=this.list.filter(function(t,e){return t.selected}),this.filterlist(this.filterItems),this.$forceUpdate()}},props:["list","filterlist"]},d,!1,function(t){i("07qm")},"data-v-02251299",null).exports,pkList:i("VU/8")(f,h,!1,function(t){i("QQUK")},"data-v-3d5cb63e",null).exports},mounted:function(){this.fetchTypeList(),this.fetchList()},methods:{fetchTypeList:async function(){var t=(await this.$req.getPokemonTypeList()).results;this.filter_list_data=t;for(var e=0;e<this.filter_list_data.length;e++)await this.fetchListByType(this.filter_list_data[e].url)},fetchList:async function(){var t=(await this.$req.getPokemonList({limit:this.limit})).results;this.list_data=t,this.cache_list_data.default=this.list_data},fetchListByType:async function(t){var e=await this.$req.getPokemonListByType(t),i=e.name,n=e.pokemon.map(function(t,e){return t.pokemon});this.cache_list_data[i]=n},fetchListItems:async function(t,e){var i=void 0;return this.cache_item_data[t]?i=this.cache_item_data[t]:(i=await this.$req.getPokemonItem(e),this.cache_item_data[t]=i),i},handlefilterlist:async function(t){if(t.length){for(var e=[],i=0;i<t.length;i++)if(this.cache_list_data[t[i].name])e.push(this.cache_list_data[t[i].name]);else{var n=await this.fetchListByType(t[i].url);e.push(n)}this.list_data=this.getInter(e)}else this.list_data=this.cache_list_data.default},getInter:function(t){var e=t[0];return t.forEach(function(t,i){i>=1&&(e=[].concat(_(t)).filter(function(t){return[].concat(_(e)).some(function(e){return e.name===t.name})}))}),e},getChild:function(t,e){var i=this,n=[];return t.forEach(function(a){a.parent_id===e&&(a.children=i.getChild(t,a.id),n.push(a))}),n}}},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pokemon-list"},[e("pk-filter",{attrs:{list:this.filter_list_data,filterlist:this.handlefilterlist}}),this._v(" "),e("pk-list",{attrs:{total_list:this.list_data}})],1)},staticRenderFns:[]};var g=i("VU/8")(m,v,!1,function(t){i("nJuu")},"data-v-7e683306",null).exports;s.default.use(p.a);var y=new p.a({routes:[{path:"/",name:"pokemonlist",component:g}]}),k=p.a.prototype.push;p.a.prototype.push=function(t){return k.call(this,t).catch(function(t){return t})};var x=i("lbHh"),L=i.n(x),w=i("2X9z"),P=i.n(w),U=l.a.create({baseURL:Object({NODE_ENV:"production"}).VUE_APP_BASE_API,timeout:0});U.interceptors.request.use(function(t){return t.headers.common.Authorization="bearer "+localStorage.getItem("access_token"),t.headers.common["Content-Type"]="application/json",t.headers.common.Accept="application/vnd.app.v1+json",t},function(t){return Promise.reject(t)}),U.interceptors.response.use(function(t){if(500==t.data.status_code)return y.replace("/login"),null;if(501==t.data.status_code)return y.replace("/login"),null;if(600!=t.data.status_code)return"api/db-archives/export"==t.config.url?t:t.data;for(var e in t.data.message)return P.a.error(t.data.message[e][0]),null},function(t){return Promise.reject(t)});var b=U,$="https://pokeapi.co/api/v2";function A(t){return b({url:$+"/type",method:"get",params:t})}function T(t){return b({url:$+"/pokemon",method:"get",params:t})}function C(t){return b({url:t,method:"get"})}function q(t){return b({url:t,method:"get"})}s.default.config.productionTip=!1,s.default.prototype.$axios=l.a,s.default.prototype.$cookie=L.a,s.default.prototype.$req=n,window.eventBus=new s.default,s.default.use(r.a),new s.default({el:"#app",router:y,components:{App:u},template:"<App/>"})},QQUK:function(t,e){},nJuu:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a9dc78625fe6093f0a7d.js.map